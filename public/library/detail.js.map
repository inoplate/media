{"version":3,"sources":["detail.coffee"],"names":[],"mappings":"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","file":"detail.js","sourcesContent":["class LibraryDetail\n    constructor: (@$element, options) ->\n        @thumbnail = options.thumbnail\n        @largePreview = options.largePreview\n\n    showDetail: (identifier, path, mime, descriptions) ->\n        @hideError()\n        $ '.nothing-selected', @$element\n            .addClass 'hide'\n\n        preview = @__buildPreview(identifier, path, mime, descriptions)\n\n        $ \".media-full-preview\", @$element\n            .html preview\n\n        $ '.media-full-preview audio, .media-full-preview video', @$element\n            .mediaelementplayer\n                pluginPath: ''\n                enablePluginDebug: false\n                enableAutosize: true\n                enableKeyboard: true\n                audioHeight: 225\n                features: ['playpause','progress','current','duration','tracks','volume','backlight']\n                timerRate: 250\n                success: (media, node, player) ->\n                    $ \"##{node.id}-mode\"\n                        .html \"mode: #{media.pluginType}\"\n\n        $ \"a.fancybox\", @$element\n            .fancybox()\n\n        $ '.media-preview-container', @$element\n            .removeClass 'hide'\n\n        $ '.selection-exist', @$element\n            .removeClass 'hide'\n\n    showError: (errors = []) ->\n        @clearDetail()\n        @hideDetail()\n\n        errors = @__buildErrors errors\n\n        $ '.media-errors', @$element\n            .html errors\n            .removeClass 'hide'\n\n    clearDetail: () ->\n        @destroyDetail()\n\n        $ '.selection-exist', @$element\n            .addClass 'hide'\n\n        $ '.nothing-selected', @$element\n            .removeClass 'hide'\n\n    hideDetail: () ->\n        $ '.media-preview-container', @$element\n            .addClass 'hide'\n\n    destroyDetail: () ->\n        $ '.media-full-preview', @$element\n            .html ''\n\n    hideError: () ->\n        $ '.media-errors', @$element\n            .addClass 'hide'\n\n        $ '.media-preview-container', @$element\n            .removeClass 'hide'\n\n    __buildErrors: (errors) ->\n        parsed = ''\n\n        if $.isArray(errors)\n            $.each errors, (key, value) ->\n                parsed = \"#{parsed}<li>#{value}</li>\"\n        else\n            parsed = \"<li>#{errors}</li>\"\n\n        \"<ul>#{parsed}</ul>\"\n\n    __buildPreview: (identifier, path, mime, descriptions) ->\n        thumbnail = @__getPreview(identifier, path, mime)\n        if isImage mime\n            largePreview = @__getLargePreview(identifier, path, mime) \n\n            preview = \"<a class=\\\"fancybox fancybox.image\\\" \n                          href=\\\"#{largePreview}\\\"\n                          title=\\\"uploads/#{descriptions.title}\\\"\n                        >\n                            <img src=\\\"#{thumbnail}\\\" alt=\\\"#{descriptions.title}\\\" />\n                       </a>\"\n\n        else if isVideo(mime)\n            preview = \"<video width=\\\"300\\\" height=\\\"225\\\" poster=\\\"#{thumbnail}\\\">\n                            <source type=\\\"#{mime}\\\" src=\\\"uploads/#{descriptions.path}\\\" />\n                        </video>\"\n        else if isAudio(mime)\n            preview = \"<audio width=\\\"300\\\" poster=\\\"#{thumbnail}\\\">\n                            <source type=\\\"#{mime}\\\" src=\\\"uploads/#{descriptions.path}\\\" />\n                        </audio>\"\n        else\n            preview = \"<img src=\\\"#{thumbnail}\\\" alt=\\\"#{descriptions.title}\\\" />\"\n\n        preview\n\n    __getLargePreview: (identifier, path, mime) ->\n        if typeof @largePreview == 'function'\n            @largePreview.apply this, [identifier, path, mime]\n        else\n            path\n\n    __getPreview: (identifier, path, mime) ->\n        if typeof @thumbnail == 'function'\n            @thumbnail.apply this, [identifier, path, mime]\n        else\n            @thumbnail\n\n# PLUGIN DEFINITION\n# ============================\n\n$.fn.libraryDetail = (option) ->\n    args = arguments\n    defaults = {}\n\n    this.each () ->\n        $this = $ this\n        data = $this.data('library.detail')\n        options = $.extend {}, defaults, $this.data(), typeof option == 'object' && option\n        if !data \n            $this.data 'library.detail', (data = new LibraryDetail $this, options)\n\n        if typeof option == 'string'\n            argsToSent = []\n\n            for k,v of args\n                if k > 0\n                    argsToSent.push v\n\n            data[option].apply(data, argsToSent)\n\n    this"],"sourceRoot":"/source/"}