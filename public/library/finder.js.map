{"version":3,"sources":["finder.coffee"],"names":[],"mappings":"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","file":"finder.js","sourcesContent":["class LibraryFinder\n    constructor: (@$element, options) ->\n        @id = null\n        @selected = []\n        @multiple = options.multiple || false\n\n        @tile = @__initTile()\n        @__attachEvent()\n        @__init()\n\n    show: (id, multiple = false) ->\n        @id = id\n        @multiple = multiple\n\n        @tile.libraryTile \"setMultiple\", multiple\n\n        @$element.modal 'show'\n\n    getSelected: () ->\n        @selected\n\n    __init: () ->\n        @$element.modal\n            show: false\n\n    __initTile: () ->\n        tile =  $ '.media-container', @$element\n            .libraryTile\n                height: \"450px\"\n                thumbnail: (library) ->\n                    getThumbnail(library.description.mime) || \"/uploads/#{library.description.path}/thumb\"\n\n        tile.libraryTile 'checkPagination'\n        tile\n\n    __attachEvent: () ->\n        $ '.btn-refresh', @$element\n            .click () =>\n                ownership = $ 'select[name=\"ownership\"]'\n                            .val()\n\n                visibility = $ 'select[name=\"visibility\"]'\n                                .val()\n\n                search = $ 'input[name=\"search\"]'\n                            .val()\n\n                $ \".btn-select\", @$element\n                    .addClass 'disabled'\n\n                payloads = \n                    ownership: ownership\n                    visibility: visibility\n                    search: search\n\n                @tile.libraryTile 'setPayload', payloads\n                @tile.libraryTile 'refineSearch', \"/admin/inoplate-media/libraries?page=1\"\n                @tile.libraryTile 'clearSelection'\n\n        $ \".upload-new\", @$element\n            .click () =>\n                $ '.uploader-container', @$element\n                    .toggleClass \"hide\"\n\n        $ \".uploader-dismiss\", @$element\n            .click () =>\n                $ '.uploader-container', @$element\n                    .addClass \"hide\"\n\n        $ '.uploader', @$element\n            .on 'uploader.fileAdded', (e, file) =>\n                console.log(@tile)\n                identifier = file.uniqueIdentifier\n                @tile.libraryTile 'addUploading', identifier, file.name\n\n                $ \"[data-upload-id=\\\"#{identifier}\\\"]\", @tile\n                    .data 'file', file\n\n        $ '.uploader', @$element\n            .on 'uploader.fileProgress', (e, file) =>\n                identifier = file.uniqueIdentifier\n                progress = file.progress() * 100\n                @tile.libraryTile 'setProgress', identifier, \"#{progress.toFixed(2)}%25\"\n\n        $ '.uploader', @$element\n            .on 'uploader.fileRetry', (e, file, chunk) =>\n                identifier = file.uniqueIdentifier\n                @tile.libraryTile 'retryUpload', identifier\n\n        $ '.uploader', @$element\n            .on 'uploader.fileError', (e, file, message, chunk) =>\n                identifier = file.uniqueIdentifier\n                @tile.libraryTile 'markAsError', identifier, message\n                $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-pause\", @tile\n                    .addClass 'hide'\n\n                $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-resume\", @tile\n                    .removeClass 'hide'\n\n        $ '.uploader', @$element\n            .on 'uploader.fileSuccess', (e, file, result) =>\n                identifier = file.uniqueIdentifier\n                result = JSON.parse result\n                @tile.libraryTile 'markAsSuccess', identifier, result.library\n\n        @tile.on 'click', 'li.uploading .btn-resume', (e) =>\n            $this = $ e.currentTarget\n            $li = $this.parents 'li'\n            identifier = $li.data 'uploadId'\n            $file = $li.data 'file'\n\n            $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-pause\", @tile\n                .removeClass 'hide'\n\n            $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-resume\", @tile\n                .addClass 'hide'\n\n            $file.resume()\n\n        @tile.on 'click', 'li.uploading .btn-pause', (e) =>\n            $this = $ e.currentTarget\n            $li = $this.parents 'li'\n            identifier = $li.data 'uploadId'\n            $file = $li.data 'file'\n\n            $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-pause\", @tile\n                .addClass 'hide'\n\n            $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-resume\", @tile\n                .removeClass 'hide'\n\n            $file.pause()\n\n        @tile.on 'click', 'li.error .btn-resume', (e) =>\n            $this = $ e.currentTarget\n            $li = $this.parents 'li'\n            identifier = $li.data 'uploadId'\n\n            $li.addClass 'uploading'\n               .removeClass 'error'\n               .removeClass 'selected'\n\n            $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-pause\", @tile\n                .removeClass 'hide'\n\n            $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-cancel\", @tile\n                .removeClass 'hide'\n\n            $ \"[data-upload-id=\\\"#{identifier}\\\"] .btn-resume\", @tile\n                .addClass 'hide'\n\n            $file = $li.data 'file'\n            $file.retry()\n\n        @tile.on 'click', 'li.uploading .btn-cancel, li.error .btn-cancel', (e) =>\n            $this = $ e.currentTarget\n            $li = $this.parents 'li'\n            $file = $li.data 'file'\n            identifier = $li.data 'uploadId'\n\n            $file.cancel()\n            @tile.libraryTile 'remove', identifier\n\n        @tile.on 'media.library.tile.loading', (e) =>\n            $ '.btn-refresh', @$element\n                .button 'loading'\n\n        @tile.on 'media.library.tile.loaded', (e) =>\n            $ '.btn-refresh', @$element\n                .button 'reset'\n\n        @tile.on 'media.library.tile.selected', (e, meta, error) =>\n            if meta\n                if @multiple\n                    @selected.push meta\n                else\n                    @selected = [meta]\n\n            if @selected.length == 0\n                $ '.btn-select', @$element\n                    .addClass 'disabled'\n            else\n                $ '.btn-select', @$element\n                    .removeClass 'disabled'\n\n        @tile.on 'media.library.tile.unselected', (e, meta, error) =>\n            if meta\n                if @multiple\n                    index = @selected.indexOf meta\n\n                    if index != -1\n                        @selected.splice(index, 1)\n                else\n                    @selected = []\n\n            if @selected.length == 0\n                $ '.btn-select', @$element\n                    .addClass 'disabled'\n            else\n                $ '.btn-select', @$element\n                    .removeClass 'disabled'\n\n        @$element.on 'click', '.btn-select', () =>\n            if @multiple\n                @$element.trigger \"media.finder.selected\", [@id, @getSelected()]\n            else\n                @$element.trigger \"media.finder.selected\", [@id, @getSelected()[0]]\n\n            @selected = []\n            @$element.modal 'hide'\n            @tile.libraryTile 'clearSelection'\n\n# PLUGIN DEFINITION\n# ============================\n\n$.fn.libraryFinder = (option) ->\n    args = arguments\n    defaults = {}\n\n    this.each () ->\n        $this = $ this\n        data = $this.data('library.finder')\n        options = $.extend {}, defaults, $this.data(), typeof option == 'object' && option\n        if !data \n            $this.data 'library.finder', (data = new LibraryFinder $this, options)\n\n        if typeof option == 'string'\n            argsToSent = []\n\n            for k,v of args\n                if k > 0\n                    argsToSent.push v\n\n            data[option].apply(data, argsToSent)\n\n    this\n\n# INIT PLUGIN TO DOM\n# ===========================\n\n$ '.library-finder'\n    .libraryFinder()"],"sourceRoot":"/source/"}